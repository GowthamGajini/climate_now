<% if @error_message.present? %>
  <div style="color: #d32f2f; background: #ffeaea; padding: 8px 16px; border-radius: 6px; margin-top: 20px; display: inline-block;">
    <%= @error_message %>
  </div>
<% elsif @weather_data&.dig(:temperature) %>
  <div style="margin-top: 20px; text-align: center;">
    <h2>
      Temperature: <span class="weather-value-main"><%= @weather_data[:temperature] %> 째C</span>
    </h2>
    <% if @weather_data[:description] %>
      <p>
        Description: <text class="weather-description"> <%= @weather_data[:description] %> </text>
      </p>
    <% end %>

    <div class="weather-panel">
      <table class="weather-table">
        <tr>
          <th>Min Temp</th>
          <th>Max Temp</th>
          <th>Humidity</th>
          <th>Pressure</th>
          <th>Visibility</th>
          <th>Wind Speed</th>
          <th>Wind Dir</th>
          <th>Clouds</th>
        </tr>
        <tr>
          <td><%= @weather_data[:temp_min] %>째C</td>
          <td><%= @weather_data[:temp_max] %>째C</td>
          <td><%= @weather_data[:humidity] %>%</td>
          <td><%= @weather_data[:pressure] %> hPa</td>
          <td><%= @weather_data[:visibility] %> m</td>
          <td><%= @weather_data[:wind_speed] %> m/s</td>
          <td><%= @weather_data[:wind_deg] %>째</td>
          <td><%= @weather_data[:clouds] %>%</td>
        </tr>
      </table>
    </div>

    <% if @cache %>
      <div class="weather-cache-note">
        (This weather data is from cache and was fetched recently.)
      </div>
    <% end %>
  </div>
<% end %>
